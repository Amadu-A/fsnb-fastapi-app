<!-- path: templates/admin/model_list.html -->
{% extends "core/base.html" %}
{% block content %}
  <h1 class="title">Модель: {{ model_name }}</h1>

  <form class="form form--search" method="get" action="{{ request.url_for('admin_model_list', slug=slug) }}">
    <div class="form__row form__row--compact">
      <div class="form__control">
        <input class="form__input" type="text" name="q" value="{{ q }}" placeholder="Поиск..." />
      </div>
      <button class="btn btn--primary" type="submit">Найти</button>
    </div>
  </form>

  <div class="table-wrap admin__table">
    <table class="table">
      <thead>
        <tr>
          {% for f in list_display %}
            <th>{{ f }}</th>
          {% endfor %}
          <th></th>
        </tr>
      </thead>
      <tbody>
        {% for row in rows %}
          <tr>
            {% for f in list_display %}
              <td>{{ attr(row, f) }}</td>
            {% endfor %}
            <td>
              <a class="btn btn--xs" href="{{ request.url_for('admin_model_edit', slug=slug, obj_id=attr(row, 'id')) }}">Edit</a>
            </td>
          </tr>
        {% endfor %}
        {% if not rows %}
          <tr><td colspan="{{ list_display|length + 1 }}">Пусто</td></tr>
        {% endif %}
      </tbody>
    </table>
  </div>
{% endblock %}
